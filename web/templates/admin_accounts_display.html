	<link rel="stylesheet" media="screen" href="stylesheets/style.css" />
<link rel="stylesheet" media="screen" href="stylesheets/font-awesome.min.css" />  

<script type="text/javascript" src="javascripts/jquery-1.11.1.js"></script>
<script type="text/javascript" src="javascripts/jquery-migrate-1.2.1.js"></script>
<script type="text/javascript" src="javascripts/jquery-ui.min.js"></script> 
<script type="text/javascript" src="javascripts/general.js"></script>
<script type="text/javascript" src="javascripts/jquery.cookie.js"></script>
<script type="text/javascript" src="javascripts/plugins/jquery.alerts.js"></script>
<script type="text/javascript" src="javascripts/index.js"></script>	
<link href="stylesheets/buttons.dataTables.min.css" type="text/css" rel="stylesheet">
<script src="javascripts/jquery.dataTables.min.js" language="javascript" type="text/javascript"></script>
<script src="javascripts/dataTables.buttons.min.js" language="javascript" type="text/javascript"></script> 

	<style>
	   .effect  { border: 4px solid rgb(255, 255, 255); }

	   .people	h3 {background: none repeat scroll 0% 0% #a6d4e6; color: white; margin-top: -20px; margin-left: -1px; padding-top: 5px; padding-bottom: 5px;}
	  .userModal {height: auto; }
	  .inactiveRow{background: #D3CDCD}
	  .inactiveRow:hover{background: #D3CDCD}
	  #userModal{height:auto;}
	  .maincontent .left{overflow: hidden;}	
	  
	  .form_default fieldset{
			background-color: #EEEEEE;
		}
		.add_plus_icon{
			font-size: 18px;
		    position: relative;
		    top: 3px;
		    left: 3px;
		    color: #555;
		}
		#channelModal th{
			color: #666;
		}
		
		#channelAdd:hover{
			color:#fff;
		}	 
	  
	</style>



<div style='padding-bottom: 40px;'>
<div style='width:20%;float:left;'>
<button type='button' class='gray_button btn btn-xs' onclick="location.href='account_create.html'"  style="cursor: pointer;background-color: #075192;border-color: #075192;" id="deposit" title="Deposit">CREATE ACCOUNT&nbsp;&nbsp;
</button>

   <div style="position: relative;margin-left:497px;color:white;font-size:30px;margin-top:-11px;">ACCOUNTS</div>

</div>


<div class="form_default" style='width:80%;float:right;'>

			
</div>
</div>


	 
	<table cellpadding="0" cellspacing="0" border="0" class="dyntable" id="account_list">
	  <thead>
	    <tr>
	      <th class="head0">Account Number</th>
	        <th class="head1">Account Holder Name</th>
	         <th class="head1">Account Type</th>
	      <th class="head0">Balance</th>
	      <th class="head0">Action</th>
	    </tr>
	  </thead>
	  <tbody>
	    
	  </tbody>
	</table>
	       

	<script type="text/javascript">	
	var table = $('#account_list').dataTable({
	   "iDisplayLength": 25,
	   "aLengthMenu": [[25, 50, 75, 100, -1], [25, 50, 75, 100, "All"]],
	   'bAutoWidth': false,
	   "paging": true,
       "pagingType": 'full_numbers'
	});

	$(document).ready(function() {
		console.log("i am herrrrrrrrrrrr")
		channel = $("#channel").val();
		url = "customer_details"
		
		$.ajax({
		   dataType: 'JSON',
		   url: url,
		   success: function(json) {
		   console.log("JSONNON"+JSON.stringify(json))
		   for (hash in json) {
		   	     console.log("Hasssssssssh"+JSON.stringify(hash))
		        for (i = 0; i < json[hash].length; i++) {		 
		                console.log("json hash value"+JSON.stringify(json[hash][i]))       		
		        		var view = "<a data-action='view' id='e_"+json[hash][i]['_id']+"' title='View spot_type' style='cursor:pointer;'>"+json[hash][i]['name']+"</a>";
		        		var actionMessg = "<a data-action='edit' id='e_"+json[hash][i]['_id']+"' style='cursor:pointer;font-size:16px;'><i class='fa fa-edit' title='Edit Account' style='margin-right:10px;'></i></a><a  data-action='del' id='d_"+json[hash][i]['_id']+"' style='cursor:pointer;font-size:16px;'><i class='fa fa-trash text-danger' title='Delete Account'></i></a>";
		        		var correct_msg = "<i class='fa fa-check' aria-hidden='true' style='color:green'></i>"
		        		var wrong_msg = "<i class='fa fa-ban' aria-hidden='true' style='color:red'></i>"
		        		if("customer_name" in json[hash][i]){
		        		var customer_name =  json[hash][i]['customer_name']
		             	}
                        var acc_type =  json[hash][i]['type']
                        var acc_no = 	json[hash][i]['acc_no']
                        var address = json[hash][i]['address']
					    var Balance = json[hash][i]['balance'] 
					     
					    
		                    table.fnAddData([acc_no  ||"",customer_name || " ",acc_type||"",Balance ||" ",actionMessg]);
		                
		                
		                
		            }
		       }
			     
			}
		});
		
  function deleteaccount(id){
			
			if(id!=""){
				jConfirm('Do you want to delete this account?',"Account",function(response){
			    if(response){
					jQuery.ajax({
					   url : "/customer_details/"+id,
					   type : 'DELETE',
					   dataType : "json",
				success : function(data) {
				jQuery('#main').load("admin_accounts_display.html");
				
				},
				error: function(xhr, status, text) {
                    var response = $.parseJSON(xhr.responseText);
                    var err = response.errors;

                 //   if (response) {
                if(err.toString()=='session_expired'){
	              window.location.href= "index.html";
                 } 
                else{  	
                       jAlert(err.toString());
                    }
                }
			});
		}
	});
			}
		}

     

		
	    /* Edit & Delete call */	

	  	jQuery('#account_list').on("click","a",function(event){ 
	  	    console.log("caling edit of acounttttttttttt") 
	  	    var id = jQuery(this).attr('id').split('_')[1];
	  		console.log("IDDDD"+id)
		    var da=jQuery(this).attr('data-action');
		    console.log("daaaaaaaaaaa"+da)
		    if(da=='edit') {
		    	console.log("edit gettinf alleddddddddd")
		    	window.location.href= "account_edit.html";
		    
			  }
			
			  else if (da=='del'){
				 deleteaccount(id);
	  		  }		  	
		 
	  
	  	});
	});
	</script>